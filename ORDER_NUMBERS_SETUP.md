# Настройка уникальных номеров заказов

## Описание
Система теперь поддерживает уникальные номера заказов для каждого банка. Например:
- Банк "Рога и копыта" с префиксом "РГ" → заказы: РГ00001, РГ00002, РГ00003...
- Банк "Сбербанк" с префиксом "СБ" → заказы: СБ00001, СБ00002, СБ00003...

## Установка

### 1. Запустите миграции
```bash
php artisan migrate
```

### 2. Сгенерируйте номера для существующих заказов
```bash
php artisan orders:generate-numbers
```

### 3. Настройте префиксы для банков
1. Перейдите в раздел "Банки"
2. Откройте любой банк для редактирования
3. В поле "Префикс для номеров заказов" введите желаемый префикс (например: РГ, СБ, ВТБ)
4. Сохраните изменения

## Как это работает

### Автоматическая генерация
- При создании нового заказа автоматически генерируется уникальный номер
- Формат: `ПРЕФИКС + 5-значный номер` (например: РГ00001)
- Номера уникальны в рамках каждого банка

### Поиск
- Поиск работает как по ID заказа, так и по номеру заказа
- Можно искать по части номера (например: "РГ" найдет все заказы банка "Рога и копыта")

### Отображение
- В таблице заказов отображается номер заказа вместо ID
- Если номер не сгенерирован, показывается ID

## Структура базы данных

### Таблица `banks`
- Добавлено поле `order_prefix` (VARCHAR(10)) - префикс для номеров заказов

### Таблица `orders`
- Добавлено поле `order_number` (VARCHAR(50)) - уникальный номер заказа
- Добавлен индекс для быстрого поиска

## Логирование
- Все изменения префиксов банков и номеров заказов логируются в activity log
- Можно просмотреть историю изменений в логах банков и заказов 
